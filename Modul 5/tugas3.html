<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tugas 4</title>

    <style>
      main {
        display: none;
      }
      main.show {
        display: block;
      }
    </style>
  </head>
  <body>
    <form action="" name="form1">
      <header>
        <h1>Data Penjualan Barang</h1>
      </header>
      <table border="1">
        <tr>
          <th colspan="2">Data Penjualan Barang</th>
        </tr>
        <tr>
          <td>Kode</td>
          <td>
            <select name="kode" onchange="pilihKodeBarang()">
              <option value="">--pilih salah satu--</option>
              <option value="B001">B001</option>
              <option value="B002">B002</option>
              <option value="b">B003</option>
            </select>
          </td>
        </tr>
        <tr>
          <td>Jumlah Beli</td>
          <td>
            <input
              type="number"
              name="jumlahbeli"
              size="10"
              maxlength="10"
              onkeyup="setPotongan()"
            />
          </td>
        </tr>
        <tr>
          <td>Nama Barang</td>
          <td>
            <input type="text" name="namabarang" />
          </td>
        </tr>
        <tr>
          <td>Harga</td>
          <td>
            <input type="number" name="harga" />
          </td>
        </tr>
        <tr>
          <td>Jumlah Bayar</td>
          <td>
            <input type="number" name="jumlahbayar" />
          </td>
        </tr>
        <tr>
          <td>Potongan <input type="number" name="potongan" /> %</td>
          <td>
            <input type="number" name="jumlahPotongan" />
          </td>
        </tr>
        <tr>
          <td>Total Bayar</td>
          <td>
            <input type="number" name="totalbayar" />
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <input
              type="button"
              name="tampil"
              value="TAMPILKAN"
              onclick="hit()"
            />
          </td>
        </tr>
      </table>
    </form>
    <main>
      <h1>Nota Penjualan</h1>
      <p>Kode Barang = <span id="kodeBarang"></span></p>
      <p>Nama Barang = <span id="namaBarang"></span></p>
      <p>Harga Barang = <span id="hargaBarang"></span></p>
      <p>Jumlah Beli = <span id="jumlahBeli"></span></p>
      <p>-----------------------------------------</p>
      <p>Jumlah Bayar = <span id="jumlahBayar"></span></p>
      <p>Potongan = <span id="potongan"></span></p>
      <p>========================</p>
      <p>Total Bayar = <span id="totalBayar"></span></p>
    </main>

    <script>
      const getElem = (id) => document.getElementById(id);
      const form1 = document.forms.form1;

      const pilihKodeBarang = () => {
        const { kode, namabarang, harga } = form1;
        switch (kode.value) {
          case "B001":
            setBarangData("Buku", 5000);
            break;
          case "B002":
            setBarangData("Penggaris", 1500);
            break;
          case "B003":
            setBarangData("Pulpen", 2000);
            break;
          default:
            setBarangData("", 0);
        }
      };

      const setBarangData = (nama, harga) => {
        form1.namabarang.value = nama;
        form1.harga.value = harga;
      };

      const setPotongan = () => {
        const {
          jumlahbeli,
          harga,
          potongan,
          jumlahbayar,
          jumlahPotongan,
          totalbayar,
        } = form1;
        const jumlahBeli = jumlahbeli.value;
        const baseHarga = parseInt(jumlahBeli) * parseInt(harga.value);

        if (!jumlahBeli) {
          potongan.value = "";
          jumlahbayar.value = "";
        } else {
          const discountRate =
            jumlahBeli <= 10 ? 0.05 : jumlahBeli <= 20 ? 0.1 : 0.15;
          potongan.value = discountRate * 100;
          jumlahbayar.value = baseHarga;
          jumlahPotongan.value = baseHarga * discountRate;
          totalbayar.value = baseHarga - parseFloat(jumlahPotongan.value);
        }
      };

      const hit = () => {
        const {
          kode,
          namabarang,
          harga,
          jumlahbeli,
          jumlahbayar,
          jumlahPotongan,
          totalbayar,
        } = form1;

        getElem("kodeBarang").textContent = kode.value;
        getElem("namaBarang").textContent = namabarang.value;
        getElem("hargaBarang").textContent = harga.value;
        getElem("jumlahBeli").textContent = jumlahbeli.value;
        getElem("jumlahBayar").textContent = jumlahbayar.value;
        getElem("potongan").textContent = jumlahPotongan.value;
        getElem("totalBayar").textContent = totalbayar.value;

        document.querySelector("main").classList.add("show");
      };
    </script>
  </body>
</html>
